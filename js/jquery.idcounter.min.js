!function(t){function e(e,s){this.element=e,this.$element=t(e),this.settings=s,this.init()}var s="idCounter",n={defaultValue:1,max:10,min:1,step:1,cost:1,disable:!1,maxLength:3,infoTargets:{value:void 0,cost:void 0},content:{increment:"+",decrement:"-"},classes:{increment:"",decrement:"",input:""},callbacks:{},format:{separator:""}};e.prototype.init=function(){var e=this;this.$element.addClass("id-counter"),this.$increment=t('<div class="id-counter-increment '+this.settings.classes.increment+'">').text(this.settings.content.increment),this.$input=t('<input class="id-counter-input '+this.settings.classes.input+'">').attr("maxLength",this.settings.maxLength),this.$decrement=t('<div class="id-counter-decrement '+this.settings.classes.decrement+'">').text(this.settings.content.decrement),this.$element.append(this.$decrement,this.$input,this.$increment),this.counter={$increment:this.$increment,$input:this.$input,$decrememt:this.$decrement},this.settings.disable?(this.$increment.addClass("id-counter-increment-disable"),this.$decrement.addClass("id-counter-decrement-disable"),this.$input.prop("disabled",!0)):("string"==typeof this.settings.infoTargets.cost?this.$costTargets=t(this.settings.infoTargets.cost):this.$costTargets=!1,this.settings.infoTargets.value&&"string"==typeof this.settings.infoTargets.value&&(this.$others=t(this.settings.infoTargets.value)),this.$increment.on("click",function(t){return e.incrementHandler(t)}),this.$decrement.on("click",function(t){return e.decrementHandler(t)}),this.$input.on("change",function(t){return e.changeHandler(t)}),this.$input.on("keypress",function(t){return e.keypressHandler(t)}),this.$input.on("keydown",function(t){return e.keydownHandler(t)})),this.setValue(this.settings.defaultValue)},e.prototype.callback=function(){var t=[].shift.call(arguments);return"function"==typeof this.settings.callbacks[t]?this.settings.callbacks[t].apply(null,arguments):!0},e.prototype.incrementHandler=function(t){if(this.callback("beforeIncrement",this.counter)===!1)return!1;var e=!1,s=this.getValue();return s+this.settings.step<=this.settings.max?(s+=this.settings.step,e=!0):s=this.settings.max,s>this.settings.max-1&&this.$increment.addClass("id-counter-increment-disable"),s>this.settings.min||(s=this.settings.min+1),this.$decrement.removeClass("id-counter-decrement-disable"),this.setValue(s),this.callback("afterIncrement",this.counter)===!1?!1:void(e&&(this.$increment.trigger("idcounter.increment"),this.$increment.trigger("idcounter.change")))},e.prototype.decrementHandler=function(t){if(this.callback("beforeDecrement",this.counter)===!1)return!1;var e=!1,s=this.getValue();return s-this.settings.step>=this.settings.min?(s-=this.settings.step,e=!0):s=this.settings.min,s<this.settings.min+1&&this.$decrement.addClass("id-counter-decrement-disable"),s<this.settings.max||(s=this.settings.max-1),this.$increment.removeClass("id-counter-increment-disable"),this.setValue(s),this.callback("afterDecrement",this.counter)===!1?!1:void(e&&(this.$increment.trigger("idcounter.decrement"),this.$increment.trigger("idcounter.change")))},e.prototype.changeHandler=function(t){var e=this.getValue();e>this.settings.min?(this.$decrement.removeClass("nbtn_disable"),e<this.settings.max?(this.increment.removeClass("nbtn_disable"),e=parseInt(e/this.settings.step)*this.settings.step):(this.$increment.addClass("nbtn_disable"),e=this.settings.max)):(this.$decrement.addClass("nbtn_disable"),e=this.settings.min),this.oldValue!=e&&this.$increment.trigger("idcounter.change"),this.setValue(e)},e.prototype.keypressHandler=function(t){var e=String.fromCharCode(t.which);return!isNaN(e)},e.prototype.keydownHandler=function(t){38==t.which?this.incrementHandler():40==t.which&&this.decrementHandler()},e.prototype.setValue=function(t){this.oldValue=t,this.$input.val(t),this.setOthers(t),this.setCost(t)},e.prototype.getValue=function(){var t=this.$input.val();return t=isNaN(t)?this.settings.min:parseInt(t)},e.prototype.setOthers=function(e){t.each(this.$others,function(t,s){"INPUT"==s.tagName?s.value=e:s.innerText=e})},e.prototype.setCost=function(t){this.$costTargets&&this.$costTargets.text(this._separateString(t*this.settings.cost))},e.prototype._separateString=function(t){var t=""+t;return t.replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1"+this.settings.format.separator)},t.fn[s]=function(s){var i=t.extend(!0,{},n,s);return t.each(this,function(t,s){new e(s,i)}),this}}(jQuery);